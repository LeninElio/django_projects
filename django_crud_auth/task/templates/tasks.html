{% extends "base.html" %}

{% block content %}
    <div class="container mt-4">
        <h1>{{ title }}</h1>
        <p>{{ description }}</p>
        <div class="row row-cols-1 row-cols-md-4 g-4">
            {% for task in tasks %}
                {% if task.datecompleted %}
                    <div class="col">
                        <div class="card border-success mb-3" style="max-width: 18rem;">

                            <div class="card-header">
                                <li class="list-group-item d-flex justify-content-between align-items-start">
                                    <div class="ms-2 me-auto">
                                      <div class="fw-bold">Listo: {{ task.datecompleted | date:'M j Y:i' }}</div>
                                    </div>
                                    {% if task.important %}
                                    <span class="badge bg-success rounded-pill">
                                        <i class="fa-sharp fa-regular fa-stars"></i>
                                    </span>
                                    {% endif %}
                                </li>
                            </div>
                            <div class="card-body text-success">
                                <h5 class="card-title">{{ task.title }}</h5>
                                <p class="card-text">{{ task.description }}</p>
                                <p class="card-text">
                                    <small class="text-body-secondary">Author: {{ task.user.username }}</small>
                                    <br>
                                    <small class="text-body-secondary">Creado: {{ task.created }}</small>
                                </p>
                            </div>

                            <div class="card-header">
                                
                            </div>

                            <div class="card-footer text-end">
                                <a href="{% url 'task_detail' task.id %}" class="btn btn-success">
                                    <i class="fa-solid fa-book-open-cover"></i>
                                    Más ...
                                </a>
                            </div>
                        </div>
                    </div>
                {% else %}
                    <div class="col">
                        <div class="card border-primary mb-3" style="max-width: 18rem;">
                            <div class="card-header">
                                <li class="list-group-item d-flex justify-content-between align-items-start">
                                    <div class="ms-2 me-auto">
                                      <div class="fw-bold">Estado: Pendiente</div>
                                    </div>
                                    {% if task.important %}
                                    <span class="badge bg-primary rounded-pill">
                                        <i class="fa-solid fa-star-shooting fa-beat"></i>
                                    </span>
                                    {% endif %}
                                </li>
                            </div>
                            <div class="card-body text-primary">
                                <h5 class="card-title">{{ task.title }}</h5>
                                <p class="card-text">{{ task.description }}</p>
                                <p class="card-text">
                                    <small class="text-body-secondary">Author: {{ task.user.username }}</small>
                                    <br>
                                    <small class="text-body-secondary">Creado: {{ task.created }}</small>
                                </p>
                            </div>

                            <div class="card-footer text-end">
                                <a href="{% url 'task_detail' task.id %}" class="btn btn-primary">
                                    <i class="fa-sharp fa-solid fa-book-open-cover"></i>
                                    Más ...
                                </a>
                            </div>

                        </div>
                    </div>
                {% endif %}

            {% endfor %}
        </div>
    </div>
{% endblock %}
